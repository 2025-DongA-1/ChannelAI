services:
  # MySQL은 외부 DB(project-db-cgi.smhrd.com:3307) 사용
  # 로컬 개발 시 필요하면 아래 주석 해제
  # mysql:
  #   image: mysql:8.0
  #   container_name: marketing_mysql
  #   environment:
  #     MYSQL_DATABASE: cgi_25K_DA1_p3_1
  #     MYSQL_USER: cgi_25K_DA1_p3_1
  #     MYSQL_PASSWORD: ${DB_PASSWORD:-changeme}
  #     MYSQL_ROOT_PASSWORD: ${DB_ROOT_PASSWORD:-rootchangeme}
  #   ports:
  #     - "3307:3306"
  #   volumes:
  #     - mysql_data:/var/lib/mysql
  #     - ./database/schema.sql:/docker-entrypoint-initdb.d/01-schema.sql
  #   networks:
  #     - marketing_network
  #   restart: unless-stopped

  redis:
    image: redis:7-alpine
    container_name: marketing_redis
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    networks:
      - marketing_network
    restart: unless-stopped

  # 개발 환경용 Adminer (DB 관리 도구)
  adminer:
    image: adminer
    container_name: marketing_adminer
    ports:
      - "8080:8080"
    networks:
      - marketing_network
    environment:
      ADMINER_DEFAULT_SERVER: project-db-cgi.smhrd.com
    restart: unless-stopped

volumes:
  # mysql_data:
  #   driver: local
  redis_data:
    driver: local

networks:
  marketing_network:
    driver: bridge
